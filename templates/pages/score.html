{% extends 'layout/app.html' %}

{% load static %}

{% block body %}
<div id="content-wrapper">
    <div class="container-fluid">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
            {{ message }}
        </div>
        {% endfor %}

        <h4 class="ml-3 mr-3">Penilaian</h4>
        <form id="score-form" action="/surpre/scorepost" method="POST">
            {% csrf_token %}
            <div class="ml-3 mr-3">
                <div class="form-label-group mb-1">
                    <input type="text" class="form-control" id="startupname" placeholder="Nama Start-Up/UMKM"
                        value="{{startupname}}" name="startupname" autofocus>
                    <label for="startupname">Nama Start-Up/UMKM</label>
                </div>
                <div class="form-label-group mb-1">
                    <input type="text" class="form-control" id="productname" placeholder="Nama Produk"
                        value="{{productname}}" name="productname" autofocus>
                    <label for="productname">Nama Produk</label>
                </div>
                <p>Tanggal prediksi: {{calculatedate}}</p>
            </div>

            <div class="mb-1 mr-3 ml-3 small">
                <div id="accordion">
                    <div class="card">
                        <div class="card-header  " id="headingOne">
                            <div class="">
                                <a class="btn" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true"
                                    aria-controls="collapseOne">
                                    User Sentiment State
                                </a>
                            </div>
                        </div>

                        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                            <div class="card-body">
                                <p>Skala Penilaian: (1) sangat tidak lengkap; (2) tidak lengkap; (3) cukup lengkap; (4)
                                    lengkap; (5) sangat lengkap </p>
                                {%for sentimentattribute in sentimentattributes%}
                                <div class="row">
                                    <div class="col-sm">
                                        <p>{{sentimentattribute.name}}:
                                            {% for choice in choices %}
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                    name="inlineRadioOptions{{sentimentattribute.id}}" id="inlineRadio1"
                                                    value="{{ choice.value }}"
                                                    {%if sentimentattribute.value is choice.value %}checked{%endif%}>
                                                <label class="form-check-label"
                                                    for="inlineRadio1">{{ choice.value }}</label>
                                            </div>
                                            {% endfor %}
                                        </p>
                                    </div>
                                </div>
                                {%endfor%}

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <div class="mb-0">
                                <a class="btn collapsed" data-toggle="collapse" data-target="#collapseTwo"
                                    aria-expanded="false" aria-controls="collapseTwo">
                                    Informasi Start-up Company
                                </a>
                            </div>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                            <div class="card-body">
                                <p>Skala Penilaian: (1) sangat tidak lengkap; (2) tidak lengkap; (3) cukup lengkap; (4)
                                    lengkap; (5) sangat lengkap </p>
                                {%for infostartupattribute in infostartupattributes%}
                                <div class="row">
                                    <div class="col-sm">
                                        <p>{{infostartupattribute.name}}:
                                            {% for choice in choices %}
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                    name="inlineRadioOptions{{infostartupattribute.id}}"
                                                    id="inlineRadio1" value="{{ choice.value }}"
                                                    {%if infostartupattribute.value is choice.value %}checked{%endif%}>
                                                <label class="form-check-label"
                                                    for="inlineRadio1">{{ choice.value }}</label>
                                            </div>
                                            {% endfor %}
                                        </p>
                                    </div>
                                </div>
                                {%endfor%}

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingThree">
                            <div class="mb-0">
                                <a class="btn collapsed" data-toggle="collapse" data-target="#collapseThree"
                                    aria-expanded="false" aria-controls="collapseThree">
                                    Informasi Platform Company
                                </a>
                            </div>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                            <div class="card-body">

                                <p>Skala Penilaian: (1) sangat tidak lengkap; (2) tidak lengkap; (3) cukup lengkap; (4)
                                    lengkap; (5) sangat lengkap </p>
                                {%for infoplatformattribute in infoplatformattributes%}
                                <div class="row">
                                    <div class="col-sm">
                                        <p>{{infoplatformattribute.name}}:
                                            {% for choice in choices %}
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio"
                                                    name="inlineRadioOptions{{infoplatformattribute.id}}"
                                                    id="inlineRadio1" value="{{ choice.value }}"
                                                    {%if infoplatformattribute.value is choice.value %}checked{%endif%}>
                                                <label class="form-check-label"
                                                    for="inlineRadio1">{{ choice.value }}</label>
                                            </div>
                                            {% endfor %}
                                        </p>
                                    </div>
                                </div>
                                {%endfor%}

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ml-3 mr-3">
                <div class=" text-center mb-1">
                    <a href="" class="btn btn-danger" data-toggle="modal" data-target="#resetScoreModal">Reset</a>
                    <button type="submit" name="calculate" class="btn btn-primary">Hitung</button>
                </div>
                <div>
                    <p>User sentiment: {{sentimentscore}}</br>
                        Informasi Start-up Company: {{infostartupscore}}</br>
                        Informasi Platform Company: {{infoplatformscore}}
                    </p>

                    <p><strong>Total skor: {{totalscore}}</br>
                            Level sukses: {{scorecategory}}</strong></p>

                </div>
            </div>

            <canvas class="" id="myChart" ></canvas>

            <div class="text-center ml-3 mr-3 mb-1">
                <a href="" class="btn btn-success" data-toggle="modal" data-target="#saveScoreModal">Simpan</a>
            </div>

            <!-- Save Score Modal-->
            <div class="modal fade small" id="saveScoreModal" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Konfirmasi</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>
                        <div class="modal-body">Pilih "Save" untuk simpan. "Cancel" untuk batal.</div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary" name="save">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- R Score Modal-->
            <div class="modal fade small" id="resetScoreModal" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Konfirmasi</h5>
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
                        </div>
                        <div class="modal-body">Pilih "Continue" untuk reset data, semua data yg sudah diisi akan
                            terhapus. "Cancel" untuk batal.</div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary" name="reset">Continue</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </div>
</div>
</div>


{% endblock %}
{% block javascript %}
<script>
    var ctx = document.getElementById("myChart");
    var myChart = new Chart(ctx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Scatter Plot',
                data: [{
                    x: 5,
                    y: 3,
                }, {
                    x: 2,
                    y: 4,
                }, {
                    x: 4,
                    y: 6,
                }, {
                    x: 3,
                    y: 7,
                }, {
                    x: 7,
                    y: 5,
                }],
                pointBackgroundColor: 'blue',
                pointBorderColor: 'darkblue',
                pointRadius: 5,
                pointHoverRadius: 5

            }]
        },
        options: {
            legend: false,
            scales: {
                xAxes: [{
                    display: true,
                    ticks: {
                        suggestedMin: 0, //min
                        suggestedMax: 10 //max 
                    }
                }],
                yAxes: [{
                    display: true,
                    ticks: {
                        suggestedMin: 0, //min
                        suggestedMax: 10 //max 
                    }
                }]


            }

        }
    });
</script>

{% endblock %}